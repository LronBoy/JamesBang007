<!DOCTYPE html>
<html xmlns:wb="http://open.weibo.com/wb">
<head>
<meta charset="UTF-8">
<title>微博登录</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
</head>
<body>
JS SDK for OAuth2.0
http://open.weibo.com/wiki/index.php/Weibo-JS_V2


<h3>1、网站接入绑定域名</h3>
为了保证你的应用或网站的安全，在使用Weibo JS SDK时，需要你在应用信息页面为该应用选定绑定域名功能，并绑定你的域名，我们将以此域名来判定Weibo JS SDK API请求来源的合法性，不合法的请求将被拒绝。



<h3>2、增加命名空间</h3>
在您页面的HTML标签中增加XML命名空间。
< html xmlns:wb="http://open.weibo.com/wb" >



<h3>3、引用JS SDK文件</h3>
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=1409564755" type="text/javascript" charset="utf-8"></script>



<h3>4、开始使用JS SDK</h3>

4.1、调用JSSDK访问API接口。
<!--
<script type="text/javascript">
//第三方与微博API进行数据交互及采用Js方式调用内置微博组件的入口函数。
WB2.anyWhere(function(W){
    W.parseCMD("/users/show.json", function(sResult, bStatus){
        try{
            //to do something...
        }catch(e){}
    },{
        uid: '123456789'
    }{
        method: 'get'
    });
});

</script>
-->
4.2、部署微博组件
<!--
<wb:share-button type="button" size="middle"> </wb:share-button>
-->





<h2>JS SDK公开方法。</h2>



WB2.login(callback)
微博登录认证功能。

<script type="text/javascript">

WB2.login(function(o) {
    //callback function
    console.log("微博登录");
    console.log(o);
    /*
    getWbUserData(function(o){
      console.log(o);
    });
    */
    console.log("----------")
});

</script>



WB2.checkLogin()
检测微博登录状态，已登录返回true，未登录返回false。

<script type="text/javascript">
var status = WB2.checkLogin();
console.log('检测微博登录状态：'+ status);

</script>



WB2.anyWhere(callback)
第三方与微博API进行数据交互及采用Js方式调用内置微博组件的入口函数。

<script type="text/javascript">
WB2.anyWhere(function(W){
    /*
    //数据交互
    W.parseCMD(...);
      
    //调用微博组件
    W.widget.hoverCard(...);
    W.widget.followButton(...);
    ...
    */
});
</script>



W.parseCMD(uri, callback, args, opts)
第三方与开放平台API接口进行数据请求的函数，必须在WB2.anyWhere中通过W对象调用。

<script type="text/javascript">
WB2.anyWhere(function(W){
    /*
    //数据交互
    W.parseCMD('/users/show.json', function(oResult, bStatus) {
        if(bStatus) {
            //to do something...
        }
    }, {
        screen_name : '姚晨'
    }, {
        method : 'get',
        cache_time : 30
    });
    */
    W.parseCMD(
      '/users/show.json',
      //返回数据后的回调函数
      function(oResult, bStatus) {
          if(bStatus) {
              console.log(oResult);
          }
      },
      //发起数据请求时，传递给API接口的参数对象。
      {
          screen_name : '姚晨'
      },
      //附加属性
      {
          method : 'get',
          cache_time : 30
      }
    );
});
</script>











</body>
</html>